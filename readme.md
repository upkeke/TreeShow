# 二叉树
平衡二叉树的平衡演示

# 准备实现的功能
删除节点按钮在一般情况下是灰色的，只有选中图元才能恢复

## MainWin
[(110条消息) Qt （高仿Visio）流程图组件开发（一） 效果展示及基本开发框架构思_梦醒梦起的博客-CSDN博客](https://blog.csdn.net/qq_43793182/article/details/127009481?app_version=5.11.0&code=app_1562916241&csdn_share_tail={"type"%3A"blog"%2C"rType"%3A"article"%2C"rId"%3A"127009481"%2C"source"%3A"qq_43793182"}&uLinkId=usr1mkqgl919blen&utm_source=app)
## MyGraphicsItem

自定义pix图元，控制图的数字和它的背景图

## MyLineItem

自定义直线图元，方便实现直线随着它连接的图元一起移动

## AVTree
### 树不平衡的可能

根节点不平衡

根节点平衡，子节点不平衡依然不平衡

### 更新每个节点的高度

调用这个函数会遍历一遍整棵树，需要减少使用，使用时机，出现插入，删除，平衡后需要调用一遍这个函数


### 插入操作
正常情况下，插入数据后应该立刻平衡插入数据后的二叉树
但是本项目主要是为了学习平衡二叉树，所以插入后先打印插入数据
后的二叉树，这个时候二叉树，可能不平衡，但是更方便观察
之后手动点击按钮，在进行平衡  

insert函数做的工作，首先是个树插入数据，然后给更新
每个节点的坐标，然后查找失衡点，这个时候可以判断

### 平衡二叉树的删除操作

找到实际删除的节点的父节点，注意是实际删除的点，不是删除值对应的节点，刷新每个节点的高度，查看实际删除的父节点是否平衡，如果平衡，这树平衡，如果树不平衡，这个父节点就是最低的不平衡点，平衡这个节点，然后再查找父节点的父节点，查看这个节点是否平衡，如果不平衡，继续平衡

查找根节点到父节点这条路径上，存在的失衡节点，且这个失衡节点的高度最低，然后这个失衡节点往下走，走的方向是高度最高的子节点，如果子节点高度相同，那么走左边，走三步，收集这三个节点，进行平衡

### 样例1

删除50后二叉树失衡，需要找出 66 77 88 这三个节点进行平衡

![image-20221120215817579](F:\图片保存处勿动\image-20221120215817579.png)

删除的节点是50，需要的是它的父节点，也就是60，刷新每个节点的高度，查找根节点到60这条路径上，存在的失衡节点，且这个失衡节点的高度最低，

### 样例2

删除绿色节点后，二叉树失衡

![image-20221120223649209](F:\图片保存处勿动\image-20221120223649209.png)

删除的节点是绿色节点，其父节点是40，查找65到40之间的失衡节点，



### 样例3

删除55 后

![image-20221120223949414](F:\图片保存处勿动\image-20221120223949414.png)

**这儿表面是删除的是55，其实是删除的65，只是删除之前将2个节点的val进行交换**，65的父节点是70，查找根节点到70之间存在的失衡节点

二叉树失衡 

![image-20221120224011511](F:\图片保存处勿动\image-20221120224011511.png)

# 样例4

删除节点退化成二叉搜索树后，可能要进行多次平衡

![image-20221121011224864](F:\图片保存处勿动\image-20221121011224864.png)

删除节点9后，节点7立刻不平衡，左边改成3为父节点，2，7为3的子节点

![image-20221121011457045](F:\图片保存处勿动\image-20221121011457045.png)

但是这是头节点 11 左边高度2，右边高度4，不平衡，需要进一步平衡

![image-20221122210645897](F:\图片保存处勿动\image-20221122210645897.png)

平衡11节点以后，发现10节点又不平衡了，继续平衡，10，一直平衡到根节点
